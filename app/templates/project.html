{% extends "base.html" %}

{% block content %}
  <h1>{{ project.name }}</h1>
  <p><strong>Master Prompt:</strong> {{ project.master_prompt }}</p>

  <hr>

  <h2>Add Candidate</h2>
  <p>Add a new candidate by providing their LinkedIn profile URL. The research will be conducted using the project's master prompt.</p>
  <form action="" method="post">
      {{ form.hidden_tag() }}
      <div class="form-group">
          {{ form.linkedin_url.label }}<br>
          {{ form.linkedin_url(class_='form-control', size=64, placeholder='https://www.linkedin.com/in/example') }}
      </div>
      <p>{{ form.submit(class_='btn btn-primary') }}</p>
  </form>

  <hr>

  <h2>Top Candidates</h2>
  {% for research in researches %}
    <div class="card mb-3">
      <div class="card-body">
        <h5 class="card-title">{{ research.candidate.linkedin_url }}</h5>
        <h6 class="card-subtitle mb-2 text-muted">Overall Score: <span class="badge badge-primary">{{ research.overall_score }}/100</span></h6>
        <p class="card-text">{{ research.summary }}</p>
        <a href="{{ url_for('main.research_detail', research_id=research.id) }}" class="btn btn-sm btn-outline-primary">View Full Report</a>
      </div>
    </div>
  {% else %}
    <p>No candidates have been researched for this project yet.</p>
  {% endfor %}
{% endblock %}
